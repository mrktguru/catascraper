# üìä Google Sheets + n8n Integration - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ Catawiki —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Google Sheets –∏ n8n.

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Google Sheets](#1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-google-sheets)
2. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ API —Å–µ—Ä–≤–µ—Ä–∞](#2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-api-—Å–µ—Ä–≤–µ—Ä–∞)
3. [–ò–º–ø–æ—Ä—Ç workflow –≤ n8n](#3-–∏–º–ø–æ—Ä—Ç-workflow-–≤-n8n)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets credentials –≤ n8n](#4-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-google-sheets-credentials)
5. [–ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#5-–∑–∞–ø—É—Å–∫-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
6. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#6-–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
Google Sheets (URLs)
    ‚Üì
n8n —á–∏—Ç–∞–µ—Ç URL –∏–∑ –∫–æ–ª–æ–Ω–∫–∏ A
    ‚Üì
API –ø–∞—Ä—Å–∏—Ç –≤—Å–µ URL
    ‚Üì
n8n –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞—Ç–Ω–æ
    ‚Üì
Google Sheets (Results)
```

---

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Google Sheets

### –®–∞–≥ 1.1: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é Google –¢–∞–±–ª–∏—Ü—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://sheets.google.com
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É
3. –ù–∞–∑–æ–≤–∏—Ç–µ –µ—ë "Catawiki Scraper"

### –®–∞–≥ 1.2: –°–æ–∑–¥–∞–π—Ç–µ –ª–∏—Å—Ç "URLs"

1. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ Sheet1 ‚Üí **URLs**
2. –í –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
   - **A1**: `url`

3. –î–æ–±–∞–≤—å—Ç–µ URL –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞—á–∏–Ω–∞—è —Å–æ –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–∏:
   ```
   A2: https://www.catawiki.com/en/l/98998534-2022-beaune-1-cru...
   A3: https://www.catawiki.com/en/l/98998535-2021-bordeaux...
   A4: https://www.catawiki.com/en/l/98998536-2020-burgundy...
   ```

**–ü—Ä–∏–º–µ—Ä –ª–∏—Å—Ç–∞ URLs:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ A                                                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ url                                                 ‚îÇ
‚îÇ https://www.catawiki.com/en/l/98998534-...          ‚îÇ
‚îÇ https://www.catawiki.com/en/l/98998535-...          ‚îÇ
‚îÇ https://www.catawiki.com/en/l/98998536-...          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –®–∞–≥ 1.3: –°–æ–∑–¥–∞–π—Ç–µ –ª–∏—Å—Ç "Results"

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ª–∏—Å—Ç: **Results**
2. –í –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:

| A | B | C | D | E | F | G | H | I | J |
|---|---|---|---|---|---|---|---|---|---|
| title | bottles_count | seller_name | current_price | shipping_cost | end_date | images_count | first_image | url | scraped_at |

**–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫:**
- **title** - –ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ—Ç–∞
- **bottles_count** - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—É—Ç—ã–ª–æ–∫
- **seller_name** - –ò–º—è –ø—Ä–æ–¥–∞–≤—Ü–∞
- **current_price** - –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞
- **shipping_cost** - –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏
- **end_date** - –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞—É–∫—Ü–∏–æ–Ω–∞
- **images_count** - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- **first_image** - –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–µ —Ñ–æ—Ç–æ
- **url** - –°—Å—ã–ª–∫–∞ –Ω–∞ –ª–æ—Ç
- **scraped_at** - –í—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞

### –®–∞–≥ 1.4: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É —Ç–∞–±–ª–∏—Ü—É
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –∏–∑ URL:
   ```
   https://docs.google.com/spreadsheets/d/SPREADSHEET_ID_HERE/edit
                                          ^^^^^^^^^^^^^^^^
                                          –≠—Ç–æ –≤–∞—à ID
   ```

–ù–∞–ø—Ä–∏–º–µ—Ä:
```
https://docs.google.com/spreadsheets/d/1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms/edit
```
ID: `1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms`

---

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API —Å–µ—Ä–≤–µ—Ä–∞

### –®–∞–≥ 2.1: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
ssh root@38.244.194.181
cd /root/cataparser
git pull origin main
```

### –®–∞–≥ 2.2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip3 install -r requirements_api.txt
```

### –®–∞–≥ 2.3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ API —Å–µ—Ä–≤–µ—Ä

```bash
# –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ systemd (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
cp catawiki-api.service /etc/systemd/system/
systemctl daemon-reload
systemctl start catawiki-api
systemctl enable catawiki-api

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status catawiki-api

# –í–∞—Ä–∏–∞–Ω—Ç B: –í—Ä—É—á–Ω—É—é (–¥–ª—è —Ç–µ—Å—Ç–∞)
./start_api.sh
```

### –®–∞–≥ 2.4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
curl http://localhost:8000/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "status": "healthy",
  "timestamp": "2025-11-16T12:00:00",
  "active_jobs": 0
}
```

‚úÖ API –≥–æ—Ç–æ–≤!

---

## 3. –ò–º–ø–æ—Ä—Ç workflow –≤ n8n

### –®–∞–≥ 3.1: –°–∫–∞—á–∞–π—Ç–µ workflow —Ñ–∞–π–ª

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
cat /root/cataparser/n8n_workflow_google_sheets.json
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞.

### –®–∞–≥ 3.2: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ n8n

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à n8n (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://your-n8n-instance.com`)
2. –ù–∞–∂–º–∏—Ç–µ **+ Workflow** –∏–ª–∏ **Import from File**
3. –í—Å—Ç–∞–≤—å—Ç–µ JSON —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
4. –ù–∞–∂–º–∏—Ç–µ **Import**

‚úÖ Workflow –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!

---

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets credentials –≤ n8n

### –®–∞–≥ 4.1: –°–æ–∑–¥–∞–π—Ç–µ Google OAuth credentials

1. –í n8n –ø–µ—Ä–µ–π–¥–∏—Ç–µ: **Settings** ‚Üí **Credentials**
2. –ù–∞–∂–º–∏—Ç–µ **+ Create New Credential**
3. –í—ã–±–µ—Ä–∏—Ç–µ **Google Sheets OAuth2 API**
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Google Cloud Console

**–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://console.cloud.google.com
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç (–∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
3. –í–∫–ª—é—á–∏—Ç–µ **Google Sheets API**:
   - APIs & Services ‚Üí Enable APIs and Services
   - –ù–∞–π–¥–∏—Ç–µ "Google Sheets API"
   - –ù–∞–∂–º–∏—Ç–µ Enable

4. –°–æ–∑–¥–∞–π—Ç–µ OAuth credentials:
   - APIs & Services ‚Üí Credentials
   - Create Credentials ‚Üí OAuth client ID
   - Application type: **Web application**
   - Authorized redirect URIs: (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ n8n)

5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client ID –∏ Client Secret –≤ n8n

6. –ù–∞–∂–º–∏—Ç–µ **Connect my account** –≤ n8n
7. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ Google
8. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Google Sheets

‚úÖ Credentials –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã!

### –®–∞–≥ 4.2: –û–±–Ω–æ–≤–∏—Ç–µ workflow

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π workflow –≤ n8n
2. –ù–∞–π–¥–∏—Ç–µ –Ω–æ–¥—É **Read URLs from Sheet**
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ:
   - **Document**: –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É —Ç–∞–±–ª–∏—Ü—É "Catawiki Scraper"
   - **Sheet**: `URLs`
   - **Range**: `A2:A1000` (—á–∏—Ç–∞—Ç—å –∏–∑ A2 –¥–æ A1000)

4. –ù–∞–π–¥–∏—Ç–µ –Ω–æ–¥—É **Write to Results Sheet**
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ:
   - **Document**: –¢–∞ –∂–µ —Ç–∞–±–ª–∏—Ü–∞ "Catawiki Scraper"
   - **Sheet**: `Results`
   - **Operation**: `Append`

### –®–∞–≥ 4.3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ URL API

–ï—Å–ª–∏ –≤–∞—à API —Å–µ—Ä–≤–µ—Ä –ù–ï –Ω–∞ localhost, –æ–±–Ω–æ–≤–∏—Ç–µ URL:

1. –ù–æ–¥—É **Start Batch Scraping Job**:
   - URL: `http://–í–ê–®_–°–ï–†–í–ï–†_IP:8000/scrape-batch`

2. –ù–æ–¥—É **Check Job Status**:
   - URL: `http://–í–ê–®_–°–ï–†–í–ï–†_IP:8000/job/{{ $json.job_id }}`

–ï—Å–ª–∏ n8n –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ —á—Ç–æ –∏ API - –æ—Å—Ç–∞–≤—å—Ç–µ `http://localhost:8000`

---

## 5. –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 5.1: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫

1. –í n8n –æ—Ç–∫—Ä–æ–π—Ç–µ workflow
2. –ù–∞–∂–º–∏—Ç–µ **Execute Workflow** (–∫–Ω–æ–ø–∫–∞ play –≤–Ω–∏–∑—É)
3. –ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º:
   - ‚úì Read URLs from Sheet
   - ‚úì Prepare URLs Array
   - ‚úì Start Batch Scraping Job
   - ‚è≥ Wait 3 Minutes
   - ‚úì Check Job Status
   - ‚úì Extract Results
   - ‚úì Write to Results Sheet

### –®–∞–≥ 5.2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ Google Sheets
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –ª–∏—Å—Ç **Results**
3. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**

| title | bottles_count | seller_name | current_price | shipping_cost | end_date |
|-------|---------------|-------------|---------------|---------------|----------|
| 2022 Beaune 1¬∞ Cru... | 6 | La cave de Jacques | ‚Ç¨ 150 | ‚Ç¨ 25 | 2 days |
| 2021 Bordeaux... | 12 | Wine Expert | ‚Ç¨ 200 | Free | 5 hours |

### –®–∞–≥ 5.3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫

1. –í workflow –Ω–∞–π–¥–∏—Ç–µ –Ω–æ–¥—É **Schedule Trigger**
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:
   - –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00: `0 9 * * *`
   - –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤: `0 */6 * * *`
   - –ö–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 10:00: `0 10 * * 1`

3. **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow**:
   - –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞ –≤ ON

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞!

---

## 6. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
1. –í –ª–∏—Å—Ç–µ URLs –¥–æ–±–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö –ª–æ—Ç–æ–≤
2. Schedule: `0 9 * * *` (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00)
3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –ª–∏—Å—Ç–µ Results
4. –ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω

### –ü—Ä–∏–º–µ—Ä 2: –†–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –±–æ–ª—å—à–æ–≥–æ —Å–ø–∏—Å–∫–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
1. –î–æ–±–∞–≤—å—Ç–µ 100+ URL –≤ –ª–∏—Å—Ç URLs
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ workflow –≤—Ä—É—á–Ω—É—é
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ ~20-30 –º–∏–Ω—É—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞)
4. –ü–æ–ª—É—á–∏—Ç–µ –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ª–∏—Å—Ç–µ Results

### –ü—Ä–∏–º–µ—Ä 3: Webhook —Ç—Ä–∏–≥–≥–µ—Ä (–ø–æ –∑–∞–ø—Ä–æ—Å—É)

–ó–∞–º–µ–Ω–∏—Ç–µ Schedule Trigger –Ω–∞ Webhook:

1. –£–¥–∞–ª–∏—Ç–µ –Ω–æ–¥—É **Schedule Trigger**
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–¥—É **Webhook**
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ:
   - Method: POST
   - Path: `/catawiki-scrape`
4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ **Read URLs from Sheet**

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å:
```bash
curl -X POST https://your-n8n.com/webhook/catawiki-scrape
```

### –ü—Ä–∏–º–µ—Ä 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. –î–æ–±–∞–≤—å—Ç–µ **Telegram Node** –ø–æ—Å–ª–µ **Success Notification**
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Bot Token –∏ Chat ID
3. –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:
   ```
   ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω!

   üìä –í—Å–µ–≥–æ: {{ $json.result.total_urls }}
   ‚úì –£—Å–ø–µ—à–Ω–æ: {{ $json.result.successful }}
   ‚úó –û—à–∏–±–æ–∫: {{ $json.result.failed }}

   –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Google Sheets
   ```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é workflow –∂–¥–µ—Ç 3 –º–∏–Ω—É—Ç—ã. –ï—Å–ª–∏ —É –≤–∞—Å –º–Ω–æ–≥–æ URL, —É–≤–µ–ª–∏—á—å—Ç–µ –≤—Ä–µ–º—è:

**–§–æ—Ä–º—É–ª–∞:** `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ URL √ó 15 —Å–µ–∫—É–Ω–¥ = –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è`

–ü—Ä–∏–º–µ—Ä—ã:
- 10 URL = 2-3 –º–∏–Ω—É—Ç—ã
- 50 URL = 10-15 –º–∏–Ω—É—Ç
- 100 URL = 20-30 –º–∏–Ω—É—Ç

–ò–∑–º–µ–Ω–∏—Ç–µ –≤ –Ω–æ–¥–µ **Wait**:
- 10 URL ‚Üí 3 minutes
- 50 URL ‚Üí 12 minutes
- 100 URL ‚Üí 25 minutes

---

## üé® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ —Ñ–æ—Ä–º—É–ª—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞:

**–õ–∏—Å—Ç Results, –∫–æ–ª–æ–Ω–∫–∞ K (status):**
```
=IF(B2>0,"‚úÖ","‚ùå")
```

**–£—Å–ª–æ–≤–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
1. –í—ã–¥–µ–ª–∏—Ç–µ –∫–æ–ª–æ–Ω–∫—É D (current_price)
2. Format ‚Üí Conditional formatting
3. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ > 200 ‚Üí –∑–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω
4. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ < 100 ‚Üí –∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω

### –§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

1. –í—ã–¥–µ–ª–∏—Ç–µ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É (–∑–∞–≥–æ–ª–æ–≤–∫–∏)
2. Data ‚Üí Create a filter
3. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –ø—Ä–æ–¥–∞–≤—Ü—É, —Ü–µ–Ω–µ –∏ —Ç.–¥.

### Pivot —Ç–∞–±–ª–∏—Ü—ã

–°–æ–∑–¥–∞–π—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏–∫—É:
1. Insert ‚Üí Pivot table
2. Rows: seller_name
3. Values: COUNT of url, AVERAGE of current_price

---

## üêõ Troubleshooting

### Workflow –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** Schedule trigger –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ workflow **–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω** (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å ON)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cron –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ timezone –≤ n8n settings

### Google Sheets –Ω–µ —á–∏—Ç–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** "Permission denied" –∏–ª–∏ "Document not found"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ Google Sheets credentials
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –≤–∞—à–µ–≥–æ Google –∞–∫–∫–∞—É–Ω—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ ID —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** "Connection refused" –≤ HTTP Request –Ω–æ–¥–µ

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω
systemctl status catawiki-api

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -f /var/log/catawiki-api.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ API
systemctl restart catawiki-api
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** Job completed, –Ω–æ –¥–∞–Ω–Ω—ã—Ö –≤ Google Sheets –Ω–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ª–∏—Å—Ç "Results" —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ credentials –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å

### Job timeout

**–ü—Ä–æ–±–ª–µ–º–∞:** Job –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∑–∞ 3 –º–∏–Ω—É—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á—å—Ç–µ –≤—Ä–µ–º—è –≤ –Ω–æ–¥–µ **Wait**
2. –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ loop –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:
   ```
   Check Status ‚Üí IF pending ‚Üí Wait 1 min ‚Üí Check Status (loop)
   ```

---

## üìä –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ workflow

```
–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00
    ‚Üì
–ß–∏—Ç–∞—Ç—å URL –∏–∑ Google Sheets (–ª–∏—Å—Ç URLs, –∫–æ–ª–æ–Ω–∫–∞ A)
    ‚Üì
–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–∞—Å—Å–∏–≤ URL
    ‚Üì
–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ API –¥–ª—è batch –ø–∞—Ä—Å–∏–Ω–≥–∞
    ‚Üì
–ü–æ–ª—É—á–∏—Ç—å job_id
    ‚Üì
–ü–æ–¥–æ–∂–¥–∞—Ç—å 3 –º–∏–Ω—É—Ç—ã
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
    ‚Üì
–ï—Å–ª–∏ completed:
    ‚Üì
    –ò–∑–≤–ª–µ—á—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    ‚Üì
    –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏
    ‚Üì
    –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è Google Sheets
    ‚Üì
    –ó–∞–ø–∏—Å–∞—Ç—å –≤ –ª–∏—Å—Ç Results
    ‚Üì
    –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ failed:
    ‚Üì
    –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
```

---

## ‚úÖ Checklist –¥–ª—è –∑–∞–ø—É—Å–∫–∞

- [ ] Google Sheets —Å–æ–∑–¥–∞–Ω–∞ —Å –ª–∏—Å—Ç–∞–º–∏ URLs –∏ Results
- [ ] URL –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –ª–∏—Å—Ç URLs (–∫–æ–ª–æ–Ω–∫–∞ A, –Ω–∞—á–∏–Ω–∞—è —Å A2)
- [ ] –ó–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ –ª–∏—Å—Ç–µ Results
- [ ] ID —Ç–∞–±–ª–∏—Ü—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- [ ] API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (`systemctl status catawiki-api`)
- [ ] API –æ—Ç–≤–µ—á–∞–µ—Ç (`curl http://localhost:8000/health`)
- [ ] Workflow –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ n8n
- [ ] Google Sheets credentials –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ n8n
- [ ] Spreadsheet ID –æ–±–Ω–æ–≤–ª–µ–Ω –≤ workflow
- [ ] –õ–∏—Å—Ç—ã URLs –∏ Results –≤—ã–±—Ä–∞–Ω—ã –≤ –Ω–æ–¥–∞—Ö
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—è–≤–∏–ª–∏—Å—å –≤ Google Sheets
- [ ] Schedule –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Workflow –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–µ—Ä Catawiki:

1. ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç–µ URL –≤ Google Sheets
2. ‚úÖ n8n –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä—Å–∏—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
3. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ Google Sheets
4. ‚úÖ –ú–æ–∂–µ—Ç–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, —Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ü–µ–Ω—ã

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `http://your-server:8000/docs`
- Google Sheets: `https://sheets.google.com`
- n8n documentation: `https://docs.n8n.io`

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–¥–µ–∏

1. **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –¥–æ–±–∞–≤—å—Ç–µ Email node –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
2. **Slack integration** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack –∫–∞–Ω–∞–ª
3. **Airtable** - –≤–º–µ—Å—Ç–æ Google Sheets –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Airtable
4. **Database** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL/MySQL –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
5. **Power BI / Tableau** - –ø–æ–¥–∫–ª—é—á–∏—Ç—å –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
6. **Price alerts** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –µ—Å–ª–∏ —Ü–µ–Ω–∞ —É–ø–∞–ª–∞ –Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞
7. **Multi-sheet** - —Ä–∞–∑–Ω—ã–µ –ª–∏—Å—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤–∏–Ω

–£—Å–ø–µ—Ö–æ–≤ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏! üöÄ
