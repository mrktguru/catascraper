# üéØ Catawiki Scraper Pro - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

–£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è scraper'–∞ —Å —á–∏—Å—Ç—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–º –≤ CSV.

## ‚ú® –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ Pro –≤–µ—Ä—Å–∏–∏:

‚úÖ **–¢–æ–ª—å–∫–æ —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞** - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∏–∫–æ–Ω–∫–∏, —Ñ–ª–∞–≥–∏, –ª–æ–≥–æ—Ç–∏–ø—ã
‚úÖ **–ß–∏—Å—Ç–æ–µ –∏–º—è –ø—Ä–æ–¥–∞–≤—Ü–∞** - –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ —Ç–µ–∫—Å—Ç–∞
‚úÖ **–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞—É–∫—Ü–∏–æ–Ω–∞** - –∫–æ–≥–¥–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Ç–æ—Ä–≥
‚úÖ **–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏** - —Ü–µ–Ω–∞ –∏–ª–∏ "Free"
‚úÖ **–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV** - –¥–ª—è Excel/Google Sheets

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –û–¥–∏–Ω URL:

```bash
# JSON —Ñ–æ—Ä–º–∞—Ç
python3 scraper_pro.py "URL" --headless

# JSON + CSV
python3 scraper_pro.py "URL" --headless --csv
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–æ URL:

```bash
# –ò–∑ —Ñ–∞–π–ª–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ CSV)
python3 batch_scraper_pro.py urls.txt --headless

# –ë–µ–∑ CSV —ç–∫—Å–ø–æ—Ä—Ç–∞
python3 batch_scraper_pro.py urls.txt --headless --no-csv
```

---

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

### JSON (scraped_data.json):

```json
{
  "title": "2022 Beaune 1¬∞ Cru \"Belissand\". Domaine Francoise Andr√© - Burgundy - 6 Bottles (0.75L)",
  "images": [
    "https://assets.catawiki.com/image/.../e8abaf51-b7b5-4979-97fb-3089c7c7b144.jpg",
    "https://assets.catawiki.com/image/.../a39d0990-86a1-4e97-baa4-1dd1c6cf0170.jpg"
  ],
  "bottles_count": 6,
  "seller_name": "La cave de Jacques",
  "current_price": "‚Ç¨ 150",
  "shipping_cost": "‚Ç¨ 25",
  "end_date": "2 days 14 hours",
  "url": "https://www.catawiki.com/en/l/98998534-...",
  "scraped_at": "2025-11-16T10:52:01.123456"
}
```

### CSV (catawiki_export_*.csv):

| title | bottles_count | seller_name | current_price | shipping_cost | end_date | images_count | url |
|-------|---------------|-------------|---------------|---------------|----------|--------------|-----|
| 2022 Beaune 1¬∞ Cru... | 6 | La cave de Jacques | ‚Ç¨ 150 | ‚Ç¨ 25 | 2 days 14 hours | 5 | https://... |

CSV –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Excel —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π (UTF-8 BOM).

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞

```
cataparser/
‚îú‚îÄ‚îÄ scraped_data.json          # –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (JSON)
‚îú‚îÄ‚îÄ catawiki_data.csv          # –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (CSV, –µ—Å–ª–∏ --csv)
‚îú‚îÄ‚îÄ debug_screenshot.png       # –°–∫—Ä–∏–Ω—à–æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îî‚îÄ‚îÄ output/                    # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã batch –ø–∞—Ä—Å–∏–Ω–≥–∞
    ‚îú‚îÄ‚îÄ listing_001.json       # –ü–µ—Ä–≤—ã–π URL (JSON)
    ‚îú‚îÄ‚îÄ listing_002.json       # –í—Ç–æ—Ä–æ–π URL (JSON)
    ‚îú‚îÄ‚îÄ listing_003.json       # –¢—Ä–µ—Ç–∏–π URL (JSON)
    ‚îú‚îÄ‚îÄ catawiki_export_20251116_105230.csv  # –í—Å–µ –≤ –æ–¥–Ω–æ–º CSV
    ‚îî‚îÄ‚îÄ summary_20251116_105230.json         # –°–≤–æ–¥–∫–∞ –ø–æ –≤—Å–µ–º URL
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–∞—Ä—Å–∏–Ω–≥ –æ–¥–Ω–æ–≥–æ –ª–æ—Ç–∞

```bash
cd /root/cataparser

python3 scraper_pro.py \
  "https://www.catawiki.com/en/l/98998534-..." \
  --headless --csv
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- `scraped_data.json` - –¥–∞–Ω–Ω—ã–µ –≤ JSON
- `catawiki_data.csv` - –¥–∞–Ω–Ω—ã–µ –≤ CSV

---

### 2. –ü–∞—Ä—Å–∏–Ω–≥ —Å–ø–∏—Å–∫–∞ –ª–æ—Ç–æ–≤

**–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `my_lots.txt`:**

```
https://www.catawiki.com/en/l/98998534-2022-beaune...
https://www.catawiki.com/en/l/98998535-2021-bordeaux...
https://www.catawiki.com/en/l/98998536-2020-burgundy...
```

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ batch –ø–∞—Ä—Å–∏–Ω–≥:**

```bash
python3 batch_scraper_pro.py my_lots.txt --headless
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–∞–ø–∫–µ `output/`:
- `listing_001.json`, `listing_002.json`, ... - –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–∞–∂–¥–æ–º—É URL
- `catawiki_export_20251116_105230.csv` - –≤—Å–µ –ª–æ—Ç—ã –≤ –æ–¥–Ω–æ–º CSV —Ñ–∞–π–ª–µ
- `summary_20251116_105230.json` - —Å–≤–æ–¥–∫–∞

---

### 3. –°–∫–∞—á–∞—Ç—å CSV –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä

```bash
# –° —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä
scp root@38.244.194.181:/root/cataparser/output/catawiki_export_*.csv ./
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SFTP –∫–ª–∏–µ–Ω—Ç (FileZilla, WinSCP).

---

## üìã –§–æ—Ä–º–∞—Ç CSV

CSV —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏:

| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `title` | –ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ—Ç–∞ | "2022 Beaune 1¬∞ Cru..." |
| `bottles_count` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—É—Ç—ã–ª–æ–∫ | 6 |
| `seller_name` | –ò–º—è –ø—Ä–æ–¥–∞–≤—Ü–∞ | "La cave de Jacques" |
| `current_price` | –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ | "‚Ç¨ 150" |
| `shipping_cost` | –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ | "‚Ç¨ 25" –∏–ª–∏ "Free" |
| `end_date` | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è | "2 days 14 hours" |
| `images_count` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ | 5 |
| `first_image` | URL –ø–µ—Ä–≤–æ–≥–æ —Ñ–æ—Ç–æ | "https://assets..." |
| `url` | –°—Å—ã–ª–∫–∞ –Ω–∞ –ª–æ—Ç | "https://catawiki.com..." |
| `scraped_at` | –í—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞ | "2025-11-16T10:52:01" |

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (cron)

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å:

```bash
# –û—Ç–∫—Ä—ã—Ç—å crontab
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00)
0 3 * * * cd /root/cataparser && python3 batch_scraper_pro.py urls.txt --headless >> /var/log/catawiki_scraper.log 2>&1
```

---

## üé® –ò–º–ø–æ—Ä—Ç CSV –≤ Excel

1. –û—Ç–∫—Ä–æ–π—Ç–µ Excel
2. –§–∞–π–ª ‚Üí –û—Ç–∫—Ä—ã—Ç—å ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ `catawiki_export_*.csv`
3. Excel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç UTF-8 BOM –∫–æ–¥–∏—Ä–æ–≤–∫—É
4. –í—Å–µ —Å–∏–º–≤–æ–ª—ã (‚Ç¨, ¬∞, √©, etc.) –æ—Ç–æ–±—Ä–∞–∑—è—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ CSV —Ñ–∞–π–ª.

---

## üîß –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π

| –§—É–Ω–∫—Ü–∏—è | fast_scraper.py | scraper_pro.py |
|---------|-----------------|----------------|
| –°–∫–æ—Ä–æ—Å—Ç—å | ‚úÖ –ë—ã—Å—Ç—Ä—ã–π | ‚úÖ –ë—ã—Å—Ç—Ä—ã–π |
| –§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞ | ‚ùå –í—Å–µ –ø–æ–¥—Ä—è–¥ | ‚úÖ –¢–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä |
| –ò–º—è –ø—Ä–æ–¥–∞–≤—Ü–∞ | ‚ùå –í–µ—Å—å –±–ª–æ–∫ | ‚úÖ –ß–∏—Å—Ç–æ–µ –∏–º—è |
| –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| CSV —ç–∫—Å–ø–æ—Ä—Ç | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `scraper_pro.py` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### CSV –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Excel —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π

CSV —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å UTF-8 BOM, —á—Ç–æ –¥–æ–ª–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ Excel.

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Excel
2. –î–∞–Ω–Ω—ã–µ ‚Üí –ò–∑ —Ç–µ–∫—Å—Ç–∞/CSV
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª
4. –ö–æ–¥–∏—Ä–æ–≤–∫–∞: "65001: Unicode (UTF-8)"

### –ù—É–∂–Ω—ã –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–≤–∫–ª—é—á–∞—è –∏–∫–æ–Ω–∫–∏)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `fast_scraper.py` –≤–º–µ—Å—Ç–æ `scraper_pro.py`.

### –ù—É–∂–µ–Ω –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `_extract_end_date()` –≤ `scraper_pro.py`.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `debug_screenshot.png`
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–µ–∑ `--headless` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã:

```bash
# 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@38.244.194.181

# 2. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /root/cataparser

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ (–µ—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
git pull origin main

# 4. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å URL
nano my_urls.txt
# –í—Å—Ç–∞–≤—å—Ç–µ URL, Ctrl+X, Y, Enter

# 5. –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
python3 batch_scraper_pro.py my_urls.txt --headless

# 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
ls -lh output/
cat output/catawiki_export_*.csv

# 7. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ CSV (—Å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞)
# exit –∏–∑ SSH, –∑–∞—Ç–µ–º:
scp root@38.244.194.181:/root/cataparser/output/catawiki_export_*.csv ./
```

–ì–æ—Ç–æ–≤–æ! üéâ
